"use strict";(globalThis.webpackChunkfirst_example=globalThis.webpackChunkfirst_example||[]).push([[8732],{28453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>r});var t=a(96540);const s={},l=t.createContext(s);function i(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(l.Provider,{value:n},e.children)}},54027:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"user-guide/adapter/healthCheck","title":"HealthCheck","description":"KadaiAdapter also provides a way to monitor its health - built on top","source":"@site/docs/user-guide/adapter/healthCheck.md","sourceDirName":"user-guide/adapter","slug":"/user-guide/adapter/healthCheck","permalink":"/kadai-doc/docs/user-guide/adapter/healthCheck","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"userSidebar","previous":{"title":"Getting Started","permalink":"/kadai-doc/docs/user-guide/adapter/gettingStarted"},"next":{"title":"Declarations","permalink":"/kadai-doc/docs/category/declarations"}}');var s=a(74848),l=a(28453);const i={sidebar_position:2},r="HealthCheck",d={},c=[{value:"Kernel",id:"kernel",level:2},{value:"Kadai",id:"kadai",level:3},{value:"Scheduler",id:"scheduler",level:3},{value:"Plugins",id:"plugins",level:2},{value:"Camunda 7",id:"camunda-7",level:3},{value:"Example-Response",id:"example-response",level:4},{value:"Camunda Systems",id:"camunda-systems",level:4},{value:"Camunda System",id:"camunda-system",level:4},{value:"Camunda",id:"camunda",level:4},{value:"Outbox",id:"outbox",level:4},{value:"Partially disabling Health-Indicators",id:"partially-disabling-health-indicators",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"healthcheck",children:"HealthCheck"})}),"\n",(0,s.jsxs)(n.p,{children:["KadaiAdapter also provides a way to monitor its health - built on top\nof ",(0,s.jsx)(n.a,{href:"https://docs.spring.io/spring-boot/reference/actuator/index.html",children:"SpringBoot Actuator"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Assuming that the adapter application runs at ",(0,s.jsx)(n.code,{children:"http://localhost:8082"})," you can request below URL for\nall health-information:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"GET http://localhost:8082/actuator/health\n"})}),"\n",(0,s.jsx)(n.h2,{id:"kernel",children:"Kernel"}),"\n",(0,s.jsx)(n.p,{children:"The hierarchical nature allows to just request health information for specific sub-systems, e.g. all\nkernel-components:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="GET http://localhost:8082/actuator/health/kadaiAdapter/kernel"',children:'{\n  "status": "UP",\n  "components": {\n    "kadai": {\n      "status": "UP",\n      "details": {\n        "kadaiVersion": "11.0.1-SNAPSHOT"\n      }\n    },\n    "scheduler": {\n      "status": "UP",\n      "components": {\n        "kadaiTaskStarter": {\n          "status": "UP",\n          "details": {\n            "lastRun": "2025-10-07T10:39:18.036280700Z",\n            "expectedNextRunBefore": "2025-10-07T10:39:38.185300900Z",\n            "expectedRunTime": 149\n          }\n        },\n        "kadaiTaskTerminator": {\n          "status": "UP",\n          "details": {\n            "lastRun": "2025-10-07T10:39:18.045281300Z",\n            "expectedNextRunBefore": "2025-10-07T10:39:38.064082400Z",\n            "expectedRunTime": 18\n          }\n        },\n        "referencedTaskClaimCanceler": {\n          "status": "UP",\n          "details": {\n            "lastRun": "2025-10-07T10:39:18.065285700Z",\n            "expectedNextRunBefore": "2025-10-07T10:39:38.103276500Z",\n            "expectedRunTime": 37\n          }\n        },\n        "referencedTaskClaimer": {\n          "status": "UP",\n          "details": {\n            "lastRun": "2025-10-07T10:39:18.065285700Z",\n            "expectedNextRunBefore": "2025-10-07T10:39:38.103276500Z",\n            "expectedRunTime": 37\n          }\n        },\n        "referencedTaskCompleter": {\n          "status": "UP",\n          "details": {\n            "lastRun": "2025-10-07T10:39:18.065285700Z",\n            "expectedNextRunBefore": "2025-10-07T10:39:38.103276500Z",\n            "expectedRunTime": 37\n          }\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"kadai",children:"Kadai"}),"\n",(0,s.jsxs)(n.p,{children:["When healthy, it should return the ",(0,s.jsx)(n.code,{children:"KADAI"})," version being used"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"kadaiVersion"})," specifies the current running version of ",(0,s.jsx)(n.code,{children:"KADAI"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"scheduler",children:"Scheduler"}),"\n",(0,s.jsx)(n.p,{children:"Health-Composite, healthy if all Health-Contributors are healthy."}),"\n",(0,s.jsx)(n.p,{children:"Each Health-Contributor provides the following information:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lastRun"}),": The last successfully reported run"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"expectedNextRunBefore"}),": The latest point in time the next scheduled run is expected to have been\nreported successful"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"expectedRunTime"}),": The expected run-time in milliseconds for a single run of the scheduled\nfunctionality, reported as lower median"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["If any of the services is not running properly, the overall status will be ",(0,s.jsx)(n.code,{children:"DOWN"})," and the error will\nbe shown in the ",(0,s.jsx)(n.code,{children:'"details"'}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"expectedNextRunBefore"})," can be configured by supplying an acceptance-multiplier for threshold.\nIt determines ",(0,s.jsx)(n.code,{children:"expectedNextRunBefore = run-time-acceptance-multiplier * expectedRunTime + lastRun"}),".\nIt can be set via:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-properties",metastring:'title="application.properties"',children:"management.health.kadai-adapter.kernel.scheduler.run-time-acceptance-multiplier=42\n"})}),"\n",(0,s.jsx)(n.h2,{id:"plugins",children:"Plugins"}),"\n",(0,s.jsx)(n.h3,{id:"camunda-7",children:"Camunda 7"}),"\n",(0,s.jsxs)(n.p,{children:["The URLs for the Camunda7-Systems are derived from the property\n",(0,s.jsx)(n.code,{children:"kadai-system-connector-camundaSystemURLs"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"example-response",children:"Example-Response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="http://localhost:8082/actuator/health/kadaiAdapter/plugin/camunda7"',children:'{\n  "status": "UP",\n  "components": {\n    "camundaSystem1": {\n      "status": "UP",\n      "components": {\n        "camunda": {\n          "status": "UP",\n          "details": {\n            "camundaEngines": [\n              {\n                "name": "default"\n              }\n            ],\n            "baseUrl": "http://localhost:8081/example-context-root/engine-rest/engine"\n          }\n        },\n        "outbox": {\n          "status": "UP",\n          "details": {\n            "outboxService": {\n              "eventsCount": 0\n            },\n            "baseUrl": "http://localhost:8081/example-context-root/outbox-rest"\n          }\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"camunda-systems",children:"Camunda Systems"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"camunda7"})," contains a composite of Camunda7-Systems"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"camunda-system",children:"Camunda System"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"camundaSystem[i]"})," contains the health of the i-th Camunda- and Outbox-Component"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"camunda",children:"Camunda"}),"\n",(0,s.jsx)(n.p,{children:"When healthy, it should return a list of the available Camunda Engines"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"camundaEngines"})," lists the available Camunda engines by name."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"baseUrl"})," shows the base URL for the Camunda REST"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"outbox",children:"Outbox"}),"\n",(0,s.jsx)(n.p,{children:"When healthy, it should return the count of events in the outbox"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"outboxService.eventsCount"})," represents the number of unprocessed events in the outbox"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"baseUrl"})," shows the base URL for the Outbox REST"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"partially-disabling-health-indicators",children:"Partially disabling Health-Indicators"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"By default"}),", all kernel- as well as all found plugin-health-composites and -indicators are\n",(0,s.jsx)(n.strong,{children:"enabled"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The KadaiAdapter-Health is a Rose-Tree where the root is ",(0,s.jsx)(n.code,{children:"kadaiAdapter"})," - the composite of all\nHealth-indicators related to the KadaiAdapter.\nBranches are ",(0,s.jsxs)(n.a,{href:"https://docs.spring.io/spring-boot/api/java/org/springframework/boot/actuate/health/CompositeHealthContributor.html",children:["\n",(0,s.jsx)(n.code,{children:"Health-Composites"})]})," -\nthemselves composed of Health-Trees.\nLeafs are ",(0,s.jsxs)(n.a,{href:"https://docs.spring.io/spring-boot/api/java/org/springframework/boot/actuate/health/HealthIndicator.html",children:["\n",(0,s.jsx)(n.code,{children:"Health-Indicators"})]}),".\nIn this tree you can"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["fully disable any branch ",(0,s.jsx)(n.code,{children:"branch"})," (composite) and it's children by setting\n",(0,s.jsx)(n.code,{children:"management.health.kadai-adapter.branch.enabled=false"}),", e.g.:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"management.health.kadai-adapter.kernel.enabled=false"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"management.health.kadai-adapter.plugin.enabled=false"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"management.health.kadai-adapter.plugin.camunda7.enabled=false"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["partially disable any of a composites contributors ",(0,s.jsx)(n.code,{children:"contributor"})," by setting\n",(0,s.jsx)(n.code,{children:"management.health.kadai-adapter.branch.contributor.enabled=false"}),", e.g.:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"management.health.kadai-adapter.kernel.kadai.enabled=false"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"management.health.kadai-adapter.kernel.kadai.scheduler=false"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"management.health.kadai-adapter.plugin.camunda7.outbox.enabled=false"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"management.health.kadai-adapter.kernel.scheduler.kadai-task-terminator.enabled=false"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This schema applies to all parts of the KadaiAdapter-HealthCheck."})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);