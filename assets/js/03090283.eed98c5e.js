"use strict";(self.webpackChunkfirst_example=self.webpackChunkfirst_example||[]).push([[8732],{54027:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"user-guide/adapter/healthCheck","title":"HealthCheck","description":"KadaiAdapter also provides a way to monitor its health - built on top of SpringBoot Actuator.","source":"@site/docs/user-guide/adapter/healthCheck.md","sourceDirName":"user-guide/adapter","slug":"/user-guide/adapter/healthCheck","permalink":"/kadai-doc/docs/user-guide/adapter/healthCheck","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"userSidebar","previous":{"title":"Getting Started","permalink":"/kadai-doc/docs/user-guide/adapter/gettingStarted"},"next":{"title":"Demo App","permalink":"/kadai-doc/docs/demo-app/demoApp"}}');var a=t(74848),i=t(28453);const l={sidebar_position:2},r="HealthCheck",d={},c=[{value:"Response Structure",id:"response-structure",level:2},{value:"Component Breakdown",id:"component-breakdown",level:2},{value:"Camunda Systems",id:"camunda-systems",level:3},{value:"Camunda System",id:"camunda-system",level:4},{value:"Camunda",id:"camunda",level:5},{value:"Outbox",id:"outbox",level:5},{value:"Kadai",id:"kadai",level:3},{value:"Scheduler",id:"scheduler",level:3},{value:"Disabling certain parts of the HealthCheck",id:"disabling-certain-parts-of-the-healthcheck",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"healthcheck",children:"HealthCheck"})}),"\n",(0,a.jsxs)(n.p,{children:["KadaiAdapter also provides a way to monitor its health - built on top of ",(0,a.jsx)(n.a,{href:"https://docs.spring.io/spring-boot/reference/actuator/index.html",children:"SpringBoot Actuator"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["Assuming that the adapter application runs at ",(0,a.jsx)(n.code,{children:"http://localhost:8082"})," you can request below URL for all health-information:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"GET http://localhost:8082/actuator/health\n"})}),"\n",(0,a.jsx)(n.p,{children:"The hierarchical nature allows to just request health information for specific sub-systems, e.g. all external services via:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"GET http://localhost:8082/actuator/health/externalServices\n"})}),"\n",(0,a.jsx)(n.p,{children:"When all the external services are healthy, it will respond with something similar to:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "status": "UP",\n  "components": {\n    "camundaSystems": {\n      "status": "UP",\n      "components": {\n        "camundaSystem1": {\n          "status": "UP",\n          "components": {\n            "camunda": {\n              "status": "UP",\n              "details": {\n                "camundaEngines": [\n                  {\n                    "name": "default"\n                  }\n                ],\n                "baseUrl": "http://localhost:8081/example-context-root/engine-rest/engine"\n              }\n            },\n            "outbox": {\n              "status": "UP",\n              "details": {\n                "outboxService": {\n                  "eventsCount": 0\n                },\n                "baseUrl": "http://localhost:8081/example-context-root/outbox-rest"\n              }\n            }\n          }\n        },\n        "camundaSystem2": {\n          "status": "UP",\n          "components": {\n            "camunda": {\n              "status": "UP",\n              "details": {\n                "camundaEngines": [\n                  {\n                    "name": "default"\n                  }\n                ],\n                "baseUrl": "http://localhost:8085/example-context-root/engine-rest/engine"\n              }\n            },\n            "outbox": {\n              "status": "UP",\n              "details": {\n                "outboxService": {\n                  "eventsCount": 0\n                },\n                "baseUrl": "http://localhost:8085/example-context-root/outbox-rest"\n              }\n            }\n          }\n        }\n      }\n    },\n    "kadai": {\n      "status": "UP",\n      "details": {\n        "kadaiVersion": "10.0.1-SNAPSHOT"\n      }\n    },\n    "scheduler": {\n      "status": "UP",\n      "components": {\n        "kadaiTaskStarter": {\n          "status": "UP",\n          "details": {\n            "lastRun": "2025-07-09T09:27:21.817394500Z",\n            "expectedNextRunBefore": "2025-07-09T09:27:41.853121800Z",\n            "expectedRunTime": 35\n          }\n        },\n        "kadaiTaskTerminator": {\n          "status": "UP",\n          "details": {\n            "lastRun": "2025-07-09T09:27:21.817394500Z",\n            "expectedNextRunBefore": "2025-07-09T09:27:41.853041700Z",\n            "expectedRunTime": 35\n          }\n        },\n        "referencedTaskClaimCanceler": {\n          "status": "UP",\n          "details": {\n            "lastRun": "2025-07-09T09:27:21.796450400Z",\n            "expectedNextRunBefore": "2025-07-09T09:27:41.820492900Z",\n            "expectedRunTime": 24\n          }\n        },\n        "referencedTaskClaimer": {\n          "status": "UP",\n          "details": {\n            "lastRun": "2025-07-09T09:27:21.797453900Z",\n            "expectedNextRunBefore": "2025-07-09T09:27:41.824716600Z",\n            "expectedRunTime": 27\n          }\n        },\n        "referencedTaskCompleter": {\n          "status": "UP",\n          "details": {\n            "lastRun": "2025-07-09T09:27:21.797453900Z",\n            "expectedNextRunBefore": "2025-07-09T09:27:41.823103100Z",\n            "expectedRunTime": 25\n          }\n        }\n      }\n    }\n  }\n}\n\n'})}),"\n",(0,a.jsxs)(n.p,{children:["The URLs for the Camunda Systems are derived from the property ",(0,a.jsx)(n.code,{children:"kadai-system-connector-camundaSystemURLs"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"response-structure",children:"Response Structure"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"status"}),": Represents the overall health of the system. If all services are operational\nit returns ",(0,a.jsx)(n.strong,{children:'"UP"'}),"."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"components"}),": Contains the health status and details of individual services within KadaiAdapter."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"component-breakdown",children:"Component Breakdown"}),"\n",(0,a.jsx)(n.h3,{id:"camunda-systems",children:"Camunda Systems"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"camundaSystems"})," contains a composite of camunda systems"]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"camunda-system",children:"Camunda System"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"camundaSystem[i]"})," contains the health of the ith camunda and outbox component"]}),"\n"]}),"\n",(0,a.jsx)(n.h5,{id:"camunda",children:"Camunda"}),"\n",(0,a.jsx)(n.p,{children:"When healthy, it should return a list of the available Camunda Engines"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"camundaEngines"})," lists the available Camunda engines by name."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"baseUrl"})," shows the base URL for the Camunda REST"]}),"\n"]}),"\n",(0,a.jsx)(n.h5,{id:"outbox",children:"Outbox"}),"\n",(0,a.jsx)(n.p,{children:"When healthy, it should return the count of events in the outbox"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"eventsCount"})," represents the number of unprocessed events in the outbox"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"baseUrl"})," shows the base URL for the Outbox REST"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"kadai",children:"Kadai"}),"\n",(0,a.jsxs)(n.p,{children:["When healthy, it should return the ",(0,a.jsx)(n.code,{children:"KADAI"})," version being used"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"kadaiVersion"})," specifies the current running version of ",(0,a.jsx)(n.code,{children:"KADAI"})]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"scheduler",children:"Scheduler"}),"\n",(0,a.jsx)(n.p,{children:"Health-Composite, healthy if all Health-Contributors are healthy."}),"\n",(0,a.jsx)(n.p,{children:"Each Health-Contributor provides the following information:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"lastRun"}),": The last successfully reported run"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"expectedNextRunBefore"}),": The latest point in time the next scheduled run is expected to have been reported successful"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"expectedRunTime"}),": The expected run-time in milliseconds for a single run of the scheduled functionality, reported as lower median"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["If any of the services is not running properly, the overall status will be ",(0,a.jsx)(n.code,{children:"DOWN"})," and the error will be shown in the ",(0,a.jsx)(n.code,{children:'"details"'}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"expectedNextRunBefore"})," can be configured by supplying an acceptance-multiplier for threshold.\nIt determines ",(0,a.jsx)(n.code,{children:"expectedNextRunBefore = run-time-acceptance-multiplier * expectedRunTime + lastRun"}),".\nIt can be set via:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-properties",metastring:'title="application.properties"',children:"management.health.external-services.scheduler.run-time-acceptance-multiplier=42\n"})}),"\n",(0,a.jsx)(n.h2,{id:"disabling-certain-parts-of-the-healthcheck",children:"Disabling certain parts of the HealthCheck"}),"\n",(0,a.jsx)(n.p,{children:"You can either"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["fully disable the ",(0,a.jsx)(n.code,{children:"external-services"}),"-HealthCheck by setting ",(0,a.jsx)(n.code,{children:"management.health.external-services.enabled=false"})," or"]}),"\n",(0,a.jsxs)(n.li,{children:["partially disable any of its contributors by setting either of","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"management.health.external-services.camunda-system.camunda.enabled=false"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"management.health.external-services.camunda-system.outbox.enabled=false"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"management.health.external-services.kadai.enabled=false"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"management.health.external-services.scheduler.enabled=false"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"This schema applies to all parts of the HealthCheck."})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>r});var s=t(96540);const a={},i=s.createContext(a);function l(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);