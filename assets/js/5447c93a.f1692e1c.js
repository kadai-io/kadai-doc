"use strict";(self.webpackChunkfirst_example=self.webpackChunkfirst_example||[]).push([[651],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(a),m=r,g=u["".concat(l,".").concat(m)]||u[m]||p[m]||o;return a?n.createElement(g,i(i({ref:t},d),{},{components:a})):n.createElement(g,i({ref:t},d))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},4006:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var n=a(7462),r=(a(7294),a(3905));const o={sidebar_position:1},i="Database",s={unversionedId:"user-guide/configuration/database",id:"user-guide/configuration/database",title:"Database",description:"In order to use KADAI, you need to create a database yourself, and then specify it through the DataSource. You can see the list of the supported databases here.",source:"@site/docs/user-guide/configuration/database.md",sourceDirName:"user-guide/configuration",slug:"/user-guide/configuration/database",permalink:"/kadai-doc/docs/user-guide/configuration/database",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"userSidebar",previous:{title:"Configuration",permalink:"/kadai-doc/docs/category/configuration"},next:{title:"Security",permalink:"/kadai-doc/docs/user-guide/configuration/security"}},l={},c=[{value:"DataSource",id:"datasource",level:3},{value:"SchemaName and Prefilling the Database",id:"schemaname-and-prefilling-the-database",level:3},{value:"Connection options",id:"connection-options",level:2}],d={toc:c};function p(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"database"},"Database"),(0,r.kt)("p",null,"In order to use KADAI, you need to create a database yourself, and then specify it through the ",(0,r.kt)("a",{parentName:"p",href:"#datasource"},"DataSource"),". You can see the list of the supported databases ",(0,r.kt)("a",{parentName:"p",href:"/kadai-doc/docs/user-guide/getting-started/supportedEnvironments"},"here"),".\nThe recommended page size for the database is 32 k. It's needed to create the database schema. The sort order of query results can be changed by the collating sequence that is specified at database creation. The default for the most databases is a case sensitive sort order.  If you want query results to be sorted case insensitively, you should specify an appropriate collating sequence."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Page size: 32k"),(0,r.kt)("li",{parentName:"ul"},"Encoding:  UTF-8"),(0,r.kt)("li",{parentName:"ul"},"Collating sequence examples: ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"  - db2 (case sensitive): IDENTITY\n  - postgres (case sensitive): de_DE.UTF-8\n")))),(0,r.kt)("p",null,"Example db2:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"CREATE DATABASE <databaseName> USING CODESET UTF-8 COLLATE USING IDENTITY PAGESIZE 32 K \n\n")),(0,r.kt)("p",null,"Example Postgres:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"CREATE DATABASE <databaseName> WITH ENCODING 'UTF8' LC_COLLATE='de_DE.UTF-8';\n")),(0,r.kt)("h3",{id:"datasource"},"DataSource"),(0,r.kt)("p",null,"KADAI connects to the database via a DataSource. It does not support XADataSources for connections to databases. The DataSource can be specified during the creation of KadaiConfiguration. For example as following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"new KadaiConfiguration.Builder(dataSource, true, schemaName, false)\n        .initKadaiProperties(propertiesFileName, delimiter)\n        .build();\n")),(0,r.kt)("p",null,"In Spring environment, the DataSource has standard spring options that can be configured in the ",(0,r.kt)("inlineCode",{parentName:"p"},"application.properties")," file. You can read more about them in the Spring documentation. Here is an example: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"spring.datasource.url=jdbc:h2:mem:kadai;NON_KEYWORDS=KEY,VALUE;IGNORECASE=TRUE;LOCK_MODE=0;\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=sa\n")),(0,r.kt)("h3",{id:"schemaname-and-prefilling-the-database"},"SchemaName and Prefilling the Database"),(0,r.kt)("p",null,'Additionally to the DataSource, you can also configure the schemaName. It can be specified during the creation of KadaiConfiguration, as seen in the example above. The default schemaName is "KADAI". The  schemaName can also be changed by setting the parameter "kadai.schemaName" in the ',(0,r.kt)("inlineCode",{parentName:"p"},"application.properties")," file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"kadai.schemaName=KADAI\n")),(0,r.kt)("p",null,"Additionaly to that, you can configure KADAI so that it prefills the database with sample data. You can find sample data in the folder ",(0,r.kt)("inlineCode",{parentName:"p"},"common/kadai-common-data/src/main/resources/sql/sample-data"),'. To do that, set the "generateSampleData" property in the ',(0,r.kt)("inlineCode",{parentName:"p"},"application.properties")," file to true:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"generateSampleData=true\n")),(0,r.kt)("h2",{id:"connection-options"},"Connection options"),(0,r.kt)("p",null,"KADAI supports three connection management modes: PARTICIPATE, AUTOCOMMIT and EXPLICIT. You can specify the connection management mode when creating KadaiEngine using "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"KadaiEngine buildKadaiEngine (KadaiConfiguration configuration, ConnectionManagementMode connectionManagementMode)\n")),(0,r.kt)("p",null,"The default mode is PARTICIPATE."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"mode"),(0,r.kt)("th",{parentName:"tr",align:null},"description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PARTICIPATE"),(0,r.kt)("td",{parentName:"tr",align:null},"KADAI  participates in surrounding global transactions. It acquires and  releases connections at begin / end of each API call and relies on the infrastructure to do the commit.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"AUTOCOMMIT"),(0,r.kt)("td",{parentName:"tr",align:null},"KADAI commits each single API call separately.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"EXPLICIT"),(0,r.kt)("td",{parentName:"tr",align:null},"KADAI  doesn't acquire, commit or close connections. The client is responsible  for opening a connection, passing it to KADAI, committing or  rolling it back. In order to close a connection, the client has to call either KadaiEngine.closeConnection() or KadaiEngine.setConnection(null).")))))}p.isMDXComponent=!0}}]);