"use strict";(self.webpackChunkfirst_example=self.webpackChunkfirst_example||[]).push([[86],{3905:(t,e,a)=>{a.d(e,{Zo:()=>p,kt:()=>k});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var s=n.createContext({}),u=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},p=function(t){var e=u(t.components);return n.createElement(s.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},m=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,s=t.parentName,p=o(t,["components","mdxType","originalType","parentName"]),m=u(a),k=r,b=m["".concat(s,".").concat(k)]||m[k]||d[k]||l;return a?n.createElement(b,i(i({ref:e},p),{},{components:a})):n.createElement(b,i({ref:e},p))}));function k(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var u=2;u<l;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},3147:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var n=a(7462),r=(a(7294),a(3905));const l={sidebar_position:5},i="TASKANA-jobs",o={unversionedId:"user-guide/configuration/taskanaJobs",id:"user-guide/configuration/taskanaJobs",title:"TASKANA-jobs",description:"Jobs are automated processes that run in the background of the application, usually periodically. They are scheduled for configurable times and then run by the scheduler. For example, the TaskCleanupJob deletes Tasks after they reached a certain time passed after their completion. You can read more about jobs here.",source:"@site/docs/user-guide/configuration/taskanaJobs.md",sourceDirName:"user-guide/configuration",slug:"/user-guide/configuration/taskanaJobs",permalink:"/taskana-doc/docs/user-guide/configuration/taskanaJobs",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"userSidebar",previous:{title:"Classification and ServiceLevel",permalink:"/taskana-doc/docs/user-guide/configuration/classificationAndServiceLevel"},next:{title:"Holidays and Working Days",permalink:"/taskana-doc/docs/user-guide/configuration/holidaysAndWorkingDays"}},s={},u=[{value:"Scheduler Configuration",id:"scheduler-configuration",level:2},{value:"General Jobs Configuration",id:"general-jobs-configuration",level:2},{value:"TaskCleanupJob Configuration",id:"taskcleanupjob-configuration",level:2},{value:"WorkbasketCleanupJob Configuration",id:"workbasketcleanupjob-configuration",level:2},{value:"HistoryCleanupJob Configuration",id:"historycleanupjob-configuration",level:2},{value:"TaskUpdatePriorityJob Configuration",id:"taskupdatepriorityjob-configuration",level:2},{value:"UserInfoRefreshJob Configuration",id:"userinforefreshjob-configuration",level:2},{value:"CustomJobs Configuration",id:"customjobs-configuration",level:2},{value:"Example",id:"example",level:2}],p={toc:u};function d(t){let{components:e,...l}=t;return(0,r.kt)("wrapper",(0,n.Z)({},p,l,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"taskana-jobs"},"TASKANA-jobs"),(0,r.kt)("p",null,"Jobs are automated processes that run in the background of the application, usually periodically. They are scheduled for configurable times and then run by the scheduler. For example, the TaskCleanupJob deletes Tasks after they reached a certain time passed after their completion. You can read more about jobs ",(0,r.kt)("a",{parentName:"p",href:"/taskana-doc/docs/user-guide/features/jobs"},"here"),".\nCommon options for jobs customization are listed and explained as following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Batch size"),": Maximum number of entities that are processed in one job"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Max number of retries"),": Maximum number of retries if a job fails "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"First run at"),": The date for the first run of the job"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Run every"),": The interval between individual runs of a job")),(0,r.kt)("p",null,"Additionally, different jobs have other special parameters for customization which can be found below.\nThere is an example job configuration and execution at the end of this article."),(0,r.kt)("p",null,"You can also configure the scheduler. The scheduler will initialize the first schedule for the jobs. Each run, the scheduler looks up which jobs are past their due date. These jobs get executed. The behavior of jobs and the scheduler in TASKANA can be customized in the configuration file ",(0,r.kt)("inlineCode",{parentName:"p"},"taskana.properties")," with the following parameters:"),(0,r.kt)("h2",{id:"scheduler-configuration"},"Scheduler Configuration"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.scheduler.enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"Enabling automated scheduling of jobs"),(0,r.kt)("td",{parentName:"tr",align:null},"true")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.scheduler.initialStartDelay"),(0,r.kt)("td",{parentName:"tr",align:null},"Start delay before the first job gets scheduled"),(0,r.kt)("td",{parentName:"tr",align:null},"100")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.scheduler.period"),(0,r.kt)("td",{parentName:"tr",align:null},"The time interval between the individual runs of the scheduler"),(0,r.kt)("td",{parentName:"tr",align:null},"5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.scheduler.periodTimeUnit"),(0,r.kt)("td",{parentName:"tr",align:null},"The unit for scheduler.initialStartDelay and scheduler.period"),(0,r.kt)("td",{parentName:"tr",align:null},"MINUTES")))),(0,r.kt)("h2",{id:"general-jobs-configuration"},"General Jobs Configuration"),(0,r.kt)("p",null,"This configuration options are overwritten by job specific configuration options"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.maxRetries"),(0,r.kt)("td",{parentName:"tr",align:null},"number of automatic retries after a job has failed"),(0,r.kt)("td",{parentName:"tr",align:null},"3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.batchSize"),(0,r.kt)("td",{parentName:"tr",align:null},"upper bound of how many tasks can be processed by one job"),(0,r.kt)("td",{parentName:"tr",align:null},"100")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.runEvery"),(0,r.kt)("td",{parentName:"tr",align:null},"period of time between the executions of jobs (Duration in ISO 8601 format)"),(0,r.kt)("td",{parentName:"tr",align:null},"P1D")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.firstRunAt"),(0,r.kt)("td",{parentName:"tr",align:null},"first time the job is run (DateTime n ISO 8601 format)"),(0,r.kt)("td",{parentName:"tr",align:null},"2023-01-01T00:00:00Z")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.lockExpirationPeriod"),(0,r.kt)("td",{parentName:"tr",align:null},"period of time the lock is valid (Duration in ISO 8601 format). Should be longer than the longest possible job execution time"),(0,r.kt)("td",{parentName:"tr",align:null},"P2D")))),(0,r.kt)("h2",{id:"taskcleanupjob-configuration"},"TaskCleanupJob Configuration"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.cleanup.task.enable"),(0,r.kt)("td",{parentName:"tr",align:null},"Enabling automated cleanup of completed tasks after a period of time specified by job.runEvery"),(0,r.kt)("td",{parentName:"tr",align:null},"true")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.cleanup.task.minimumAge"),(0,r.kt)("td",{parentName:"tr",align:null},"the completed task can be deleted by the cleanup only after this period of time or later  (Duration in ISO 8601 format)"),(0,r.kt)("td",{parentName:"tr",align:null},"P14D")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.cleanup.task.allCompletedSameParentBusiness"),(0,r.kt)("td",{parentName:"tr",align:null},"Prevent deletion of tasks if other tasks with same parent business process ID are not yet completed"),(0,r.kt)("td",{parentName:"tr",align:null},"true")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.cleanup.task.lockExpirationPeriod"),(0,r.kt)("td",{parentName:"tr",align:null},"period of time the lock is valid (Duration in ISO 8601 format). Should be longer than the longest possible job execution time"),(0,r.kt)("td",{parentName:"tr",align:null},"PT30M")))),(0,r.kt)("h2",{id:"workbasketcleanupjob-configuration"},"WorkbasketCleanupJob Configuration"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.cleanup.workbasket.enable"),(0,r.kt)("td",{parentName:"tr",align:null},"Enable WorkbasketCleanupJob to cleanup completed workbaskets after a period of time if no pending tasks"),(0,r.kt)("td",{parentName:"tr",align:null},"true")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.cleanup.workbasket.lockExpirationPeriod"),(0,r.kt)("td",{parentName:"tr",align:null},"period of time the lock is valid (Duration in ISO 8601 format). Should be longer than the longest possible job execution time"),(0,r.kt)("td",{parentName:"tr",align:null},"PT30M")))),(0,r.kt)("h2",{id:"historycleanupjob-configuration"},"HistoryCleanupJob Configuration"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.cleanup.history.simple.enable"),(0,r.kt)("td",{parentName:"tr",align:null},"Enables the HistoryCleanupJob to delete history events"),(0,r.kt)("td",{parentName:"tr",align:null},"false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.cleanup.history.simple.minimumAge"),(0,r.kt)("td",{parentName:"tr",align:null},"a history event may only be deleted by the cleanup after this period of time or later  (Duration in ISO 8601 format)"),(0,r.kt)("td",{parentName:"tr",align:null},"P14D")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.cleanup.history.simple.batchSize"),(0,r.kt)("td",{parentName:"tr",align:null},"upper bound of how many history events can be processed by one history cleanup job"),(0,r.kt)("td",{parentName:"tr",align:null},"100")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.cleanup.history.simple.allCompletedSameParentBusiness"),(0,r.kt)("td",{parentName:"tr",align:null},'Prevent deletion of Task History Events if other Task History Events with same parent business process ID have types other than "CREATED"'),(0,r.kt)("td",{parentName:"tr",align:null},"true")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.cleanup.history.simple.lockExpirationPeriod"),(0,r.kt)("td",{parentName:"tr",align:null},"period of time the lock is valid (Duration in ISO 8601 format). Should be longer than the longest possible job execution time"),(0,r.kt)("td",{parentName:"tr",align:null},"PT30M")))),(0,r.kt)("h2",{id:"taskupdatepriorityjob-configuration"},"TaskUpdatePriorityJob Configuration"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.priority.task.enable"),(0,r.kt)("td",{parentName:"tr",align:null},"Enabling automated recalculation of priority of each tasks that is not in an endstate"),(0,r.kt)("td",{parentName:"tr",align:null},"false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.priority.task.batchSize"),(0,r.kt)("td",{parentName:"tr",align:null},"upper bound of how many tasks can be processed by one TaskUpdatePriorityJob"),(0,r.kt)("td",{parentName:"tr",align:null},"100")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.priority.task.runEvery"),(0,r.kt)("td",{parentName:"tr",align:null},"period of time between the executions of the TaskUpdatePriorityJob (Duration in ISO 8601 format)"),(0,r.kt)("td",{parentName:"tr",align:null},"P1D")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.priority.task.firstRunAt"),(0,r.kt)("td",{parentName:"tr",align:null},"first time the job is executed (DateTime in ISO 8601 format)"),(0,r.kt)("td",{parentName:"tr",align:null},"2023-01-01T00:00:00Z")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.priority.task.lockExpirationPeriod"),(0,r.kt)("td",{parentName:"tr",align:null},"period of time the lock is valid (Duration in ISO 8601 format). Should be longer than the longest possible job execution time"),(0,r.kt)("td",{parentName:"tr",align:null},"PT30M")))),(0,r.kt)("h2",{id:"userinforefreshjob-configuration"},"UserInfoRefreshJob Configuration"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.refresh.user.enable"),(0,r.kt)("td",{parentName:"tr",align:null},"Enable job to refresh all user info after a period of time"),(0,r.kt)("td",{parentName:"tr",align:null},"false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.refresh.user.runEvery"),(0,r.kt)("td",{parentName:"tr",align:null},"period of time between the executions of the UserInfoRefreshJob (Duration in ISO 8601 format)"),(0,r.kt)("td",{parentName:"tr",align:null},"P1D")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.refresh.user.firstRunAt"),(0,r.kt)("td",{parentName:"tr",align:null},"first time the job is executed (DateTime in ISO 8601 format)"),(0,r.kt)("td",{parentName:"tr",align:null},"2023-01-01T23:00:00Z")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.refresh.user.lockExpirationPeriod"),(0,r.kt)("td",{parentName:"tr",align:null},"period of time the lock is valid (Duration in ISO 8601 format). Should be longer than the longest possible job execution time"),(0,r.kt)("td",{parentName:"tr",align:null},"PT30M")))),(0,r.kt)("h2",{id:"customjobs-configuration"},"CustomJobs Configuration"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taskana.jobs.customJobs"),(0,r.kt)("td",{parentName:"tr",align:null},"Initialize custom jobs by specifying path to job class"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("h2",{id:"example"},"Example"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Setup"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"taskana.jobs.scheduler.enabled=true\ntaskana.jobs.scheduler.initialStartDelay=2\ntaskana.jobs.scheduler.period=3\ntaskana.jobs.scheduler.periodTimeUnit=HOURS\ntaskana.jobs.refresh.user.firstRunAt=2017-04-05T18:00:00Z\ntaskana.jobs.refresh.user.runEvery=P4H\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Result")," (assuming refresh user job is the only active job):"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Local Image",src:a(9100).Z,width:"675",height:"281"})))}d.isMDXComponent=!0},9100:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/Timeline.drawio-ceb12631b8434b428d94d7808d21f0ab.png"}}]);